<html>
<head>
<title>test page for object fbcontrol</title>
</head>
    <script type="text/javascript">
        function plugin0()
        {
            return document.getElementById('plugin0');
        }
        fathom = plugin0;
        function addEvent(obj, name, func)
        {
            if (obj.attachEvent) {
                obj.attachEvent("on"+name, func);
            } else {
                obj.addEventListener(name, func, false); 
            }
        }
        
        function load()
        {
            addEvent(fathom(), 'test', function(){
                alert("Received a test event from the plugin.")
            });
        }
        function pluginLoaded() {
            //alert("Plugin loaded!");
        }
        
        function addTestEvent()
        {
            addEvent(fathom(), 'echo', function(txt,count){
                alert(txt+count);
            });
        }
        
        function testEvent()
        {
            fathom().testEvent();
        }
        
        function pluginValid()
        {
            if(fathom().valid){
                alert(fathom().echo("This plugin seems to be working!"));
            } else {
                alert("Plugin is not working :(");
            }
        }

        function sendBroadcastMessages()
        {
            if(fathom().valid)
            {
                return fathom().sendBroadcastMessages();
            } else {
                return "Plugin is not working :(";
            }

        }
    </script>

<body onload="load()">
<object id="plugin0" type="application/x-socketbroadcastdemo" width="0" height="0">
    <param name="onload" value="pluginLoaded" />
</object><br />

<p>send broadcast message via setsockopt after run 'python udpserver.py' in terminal</p>
<p>when you see 'send messages success', you will find messages in terminal that udpserver receive and print</p>
<!--
<a href="#" onclick="javascript:pluginValid()">Click me!</a> <br />
<a href="#" onclick="javascript:addTestEvent()">Activate click counter</a> <br />
<a href="#" onclick="javascript:testEvent()">Fire a test event</a> <br />
<a href="#" onclick="javascript:mainPing()">Ping Demo</a><br />-->
<div style="width: 260px;float: left;"id="result"></div>
<script>
var result = sendBroadcastMessages();
document.getElementById("result").innerHTML = result;
</script>
</body>
</html>
